@page "/login"
@using LRFrontend.Models
@rendermode InteractiveServer
@layout EmptyLayout
@inject HttpClient Http // ‡πÉ‡∏ä‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ÅAPI
@inject NavigationManager Navigation // ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏áURL

@*  ‡∏™‡πà‡∏ß‡∏ô UI  *@
@*  d-flex ‡πÉ‡∏ä‡πâ Flexbox (display: flex) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏î‡πâ‡∏≤‡∏ô‡πÉ‡∏ô justify-content-center	‡∏à‡∏±‡∏î‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á align-items-center ‡∏à‡∏±‡∏î‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á vh-100 ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á 100% ‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ (viewport height) bg-light	‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏≠‡πà‡∏≠‡∏ô (‡πÉ‡∏ä‡πâ theme ‡∏™‡∏µ‡∏≠‡πà‡∏≠‡∏ô) *@
<div class="d-flex justify-content-center align-items-center vh-100 bg-light"> @* ‡∏Å‡∏•‡πà‡∏≠‡∏á login ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î ‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏≠‡πà‡∏≠‡∏ô *@
    @* ‡∏Å‡∏•‡πà‡∏≠‡∏á login *@
    @* card	‡πÉ‡∏ä‡πâ Bootstrap card shadow	‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏á‡∏≤‡πÉ‡∏´‡πâ‡∏Å‡∏•‡πà‡∏≠‡∏á rounded-4	‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏£‡∏∞‡∏î‡∏±‡∏ö 4 p-4	padding ‡∏£‡∏≠‡∏ö‡πÉ‡∏ô‡∏ï‡∏±‡∏ß 1.5rem border-0 ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏Ç‡∏≠‡∏ö max-width ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î  *@
    <div class="card shadow rounded-4 p-4 border-0" style="max-width: 380px; width: 100%;"> @*‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡∏ô‡∏≤‡∏î‡∏û‡∏≠‡∏î‡∏µ‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ ‡∏°‡∏µ‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏≠‡∏ö ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡πÄ‡∏á‡∏≤  *@
        <h5 class="text-center text-secondary fw-bold mb-4"> <!-- h5: ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏£‡∏∞‡∏î‡∏±‡∏ö 5 text-center: ‡∏à‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á text-secondary: ‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ó‡∏≤ fw-bold: ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏≤ mb-4: Margin ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á 1.5rem (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡πâ‡∏ô‡∏´‡πà‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°)-->
            <i class="bi bi-box-arrow-in-right me-2"></i>Login <!-- ‡πÉ‡∏ä‡πâ Bootstrap Icons: üîó bi-box-arrow-in-right ‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô me-2: margin-end 0.5rem (‡πÄ‡∏ß‡πâ‡∏ô‡∏Ç‡∏ß‡∏≤‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°)-->
        </h5> <!-- ‡∏´‡∏±‡∏ß‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô + ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "Login" ‡πÅ‡∏ö‡∏ö‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏≤ ‡πÄ‡∏ó‡∏≤‡∏≠‡πà‡∏≠‡∏ô -->

        <!--‡∏ó‡∏≥ data binding ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á UI (input) ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£/Model + validation ‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å -->
        <EditForm Model="loginClass" OnValidSubmit="HandleLogin">   <!-- ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ form ‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ object loginClass ‡πÄ‡∏õ‡πá‡∏ô model OnValidSubmit=""	‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ï‡∏≤‡∏° validation ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å method HandleLogin()-->
            <DataAnnotationsValidator /> <!-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å attribute ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏ô Class ‡πÄ‡∏ä‡πà‡∏ô [Required] ‡∏´‡∏£‡∏∑‡∏≠ [EmailAddress] -->
            <ValidationSummary class="text-danger small mb-2" /> <!-- ValidationSummary ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° error ‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö model text-danger ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏µ‡πÅ‡∏î‡∏á small	‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÄ‡∏•‡πá‡∏Å mb-2	Margin ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á 0.5rem ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á -->


            <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å Email -->
            <div class="form-floating mb-3"> <!--form-floating ‡πÄ‡∏õ‡πá‡∏ô feature ‡∏Ç‡∏≠‡∏á Bootstrap ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ label ‡∏•‡∏≠‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå mb-3	margin-bottom: 1rem (‚âà16px) ‚Üí ‡πÄ‡∏ß‡πâ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡πÑ‡∏ü‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á input -->
                <InputText id="email" class="form-control rounded-3" placeholder="Email" @bind-Value="loginClass.Email" /> <!--InputText ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö input ‡πÅ‡∏ö‡∏ö text id="" ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö label for="email" class="form-control" ‡∏Ñ‡∏•‡∏≤‡∏™ Bootstrap ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á rounded-3 ‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏ô‡∏¥‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö 3 placeholder="Email"	‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≠‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏¢‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏á bind-Value ‡∏ú‡∏π‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏Å‡∏•‡∏±‡∏ö Two-way data binding ‡∏Å‡∏±‡∏ö loginClass.Email-->
                <label for="email"><i class="bi bi-envelope-fill me-2"></i>Email</label> <!--label for="email" ‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö InputText id="email  ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà label ‡πÅ‡∏•‡πâ‡∏ß input ‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡πÑ‡∏î‡πâ bi bi-envelope-fill ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ã‡∏≠‡∏á‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏à‡∏≤‡∏Å me-2 margin-end (‡∏Ç‡∏ß‡∏≤) 0.5rem ‚Üí ‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Email -->
                <ValidationMessage For="@(() => loginClass.Email)" class="text-danger small" /> <!-- ‡πÉ‡∏ä‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° error ‡∏ñ‡πâ‡∏≤ input ‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô validation For = ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ error ‡∏ô‡∏µ‡πâ‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö Email ‡πÉ‡∏ô model text-danger ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏µ‡πÅ‡∏î‡∏á small ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÄ‡∏•‡πá‡∏Å -->
            </div> 

            <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å Password + ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô -->
            <div class="form-floating mb-3 position-relative"> <!--form-floating ‡∏ó‡∏≥ label ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏¢‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏Å input mb-3	Margin-bottom: 1rem (‚âà16px) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞ position-relative ‡∏ß‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° "‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"-->
                <InputText id="password" class="form-control rounded-3" placeholder="Password" 
                           type="@(!showPassword ? "password" : "text")"
                           @bind-Value="loginClass.Password" />  <!-- id="password" ‡πÄ‡∏õ‡πá‡∏ô id ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö label for="password" ‡∏Ñ‡∏•‡∏≤‡∏™ Bootstrap ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á rounded-3: ‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏£‡∏∞‡∏î‡∏±‡∏ö 3 type ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡∏≠‡∏á input ‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á showPassword bind-Value ‡∏ú‡∏π‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏Å‡∏•‡∏±‡∏ö Two-way data binding ‡∏Å‡∏±‡∏ö loginClass.Password -->
                <label for="password"><i class="bi bi-lock-fill me-2"></i>Password</label> <!--label	‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö input id="password" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà label ‡πÅ‡∏•‡πâ‡∏ß input ‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡πÑ‡∏î‡πâ bi bi-lock-fill ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÅ‡∏°‡πà‡∏Å‡∏∏‡∏ç‡πÅ‡∏à me-2 margin-end 0.5rem ‚Üí ‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Password-->
                <ValidationMessage For="@(() => loginClass.Password)" class="text-danger small" /> 
                <!--‡πÉ‡∏ä‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° error ‡∏ñ‡πâ‡∏≤ input ‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô For= ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ error ‡∏ô‡∏µ‡πâ‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö ‡πÉ‡∏ô model ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏µ‡πÅ‡∏î‡∏á small ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÄ‡∏•‡πá‡∏Å-->   
                
                <!-- ‡∏õ‡∏∏‡πà‡∏° ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô type="button"‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ -->
                <button type="button" 
                        class="btn btn-sm btn-light position-absolute top-50 end-0 translate-middle-y me-3 border-0"
                        @onclick="() => showPassword = !showPassword"> <!-- class="..." ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° ‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á btn Bootstrap ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏õ‡∏∏‡πà‡∏° btn-sm	‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å btn-light	‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏°‡πÇ‡∏ó‡∏ô‡∏≠‡πà‡∏≠‡∏ô position-absolute ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á top-50 ‡∏à‡∏±‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏à‡∏≤‡∏Å‡∏Ç‡∏≠‡∏ö‡∏ö‡∏ô 50% (‡∏≠‡∏¢‡∏π‡πà‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á) end-0 ‡∏à‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î (end ‡πÉ‡∏ô Bootstrap = right) translate-middle-y	‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏ô‡πÅ‡∏ô‡∏ß Y -50% ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÜ me-3 1rem (‚âà16px) ‡πÄ‡∏ß‡πâ‡∏ô‡∏Ç‡∏≠‡∏ö‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏à‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ border-0	‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏™‡πâ‡∏ô‡∏Ç‡∏≠‡∏ö‡∏£‡∏≠‡∏ö‡∏õ‡∏∏‡πà‡∏° -->
                        <!-- onclick= "" ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏à‡∏∞ toggle ‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ showPassword ‡∏à‡∏≤‡∏Å true ‡πÄ‡∏õ‡πá‡∏ô false showPassword ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÉ‡∏ô type ‡∏Ç‡∏≠‡∏á <InputText> -->
                    <i class="bi @(showPassword ? "bi-eye-slash-fill" : "bi-eye-fill")"></i> <!-- <i class="bi @(...)"></i> ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏° showPassword == true "bi-eye-slash-fill" ‚Üí ‡∏£‡∏π‡∏õ‡∏ï‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏±‡∏ö (‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤ "‡∏ã‡πà‡∏≠‡∏ô") showPassword == false	"bi-eye-fill" ‚Üí ‡∏£‡∏π‡∏õ‡∏ï‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥ (‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤ "‡πÅ‡∏™‡∏î‡∏á") -->
                </button>
            </div>

            <!-- ‡∏õ‡∏∏‡πà‡∏° Login -->
            <div class="d-grid"> <!-- Bootstrap 5 ‡πÉ‡∏ä‡πâ Grid Display ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏ï‡πá‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á login -->
                <button type="submit" class="btn btn-dark rounded-pill" disabled="@isLoading"> <!-- type="submit" ‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà ‚Äúsubmit‚Äù ‡∏ñ‡πâ‡∏≤ model ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£ validation ‚Üí ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å method OnValidSubmit ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ HandleLogin() btn-dark ‡∏õ‡∏∏‡πà‡∏°‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏° rounded-pill ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏≤‡∏Å disabled="@isLoading" ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ß‡πà‡∏≤ ‡∏õ‡∏∏‡πà‡∏°‡∏à‡∏∞‡∏Å‡∏î‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ isLoading   -->
                    @if (isLoading) @* ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á loading spinner isLoading == true ‚Üí ‡∏õ‡∏∏‡πà‡∏°‡∏à‡∏∞‡∏ñ‡∏π‡∏Å ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (disabled) ‚ûú ‡∏Å‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ, ‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥ isLoading == false ‚Üí ‡∏õ‡∏∏‡πà‡∏° ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥ *@
                    {
                        <!-- ‡πÅ‡∏™‡∏î‡∏á spinner ‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î spinner-border = ‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏´‡∏°‡∏∏‡∏ô spinner-border-sm = ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å me-2 = margin-end (‡∏Ç‡∏ß‡∏≤) 0.5rem ‚Üí ‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° role="status" ‡∏ö‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ -->
                        <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                    }
                    else
                    {   
                        <!-- bi bi-arrow-right-short ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏•‡∏π‡∏Å‡∏®‡∏£‡∏Ç‡∏ß‡∏≤‡∏™‡∏±‡πâ‡∏ô ms-1 = margin-start 0.25rem ‚Üí ‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° -->
                        <span>Sign In <i class="bi bi-arrow-right-short ms-1"></i></span>
                    }
                </button>
            </div>

            <!-- ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Register -->
            <div class="text-center mt-3">
                <small>
                    Don't have an account?
                    <button type="button" class="btn btn-link p-0 m-0 align-baseline" @onclick="GoToRegister">
                        Register
                    </button>
                </small>
            </div>

            <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö ‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏´‡∏£‡∏∑‡∏≠ error -->
            @if (!string.IsNullOrEmpty(loginMessage))
            {
                <div class="alert alert-success mt-3 text-center p-2">@loginMessage</div>
            }
            else if (!string.IsNullOrEmpty(loginError))
            {
                <div class="alert alert-danger mt-3 text-center p-2">@loginError</div>
            }
        </EditForm>
    </div>
</div>

@code {
    private LoginClass loginClass = new();
    private bool showPassword = false; // ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
    private bool isLoading = false;  // ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏° login
    private string loginMessage; // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
    private string loginError; // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß


    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ login form ‡∏ñ‡∏π‡∏Å submit ‡πÅ‡∏•‡∏∞ valid
    private async Task HandleLogin()
    {
        loginMessage = ""; // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
        loginError = "";
        isLoading = true; // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏´‡∏•‡∏î

        try
        {
            // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏£‡∏≠‡∏Å email ‡∏´‡∏£‡∏∑‡∏≠ password ‡πÉ‡∏´‡πâ‡πÅ‡∏à‡πâ‡∏á error ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
            if (string.IsNullOrWhiteSpace(loginClass.Email) || string.IsNullOrWhiteSpace(loginClass.Password))
            {
                loginError = "Please enter Email and Password.";
                isLoading = false;
                return;
            }

            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API login ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• loginClass ‡πÄ‡∏õ‡πá‡∏ô JSON
            var response = await Http.PostAsJsonAsync("api/Auth/login", loginClass);

            if (response.IsSuccessStatusCode)
            {
                // ‡∏ñ‡πâ‡∏≤ login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á
                var resultMessage = await response.Content.ReadAsStringAsync();
                loginMessage = $"‚úÖ {resultMessage}";

                StateHasChanged();
                await Task.Delay(1000); // ‡∏£‡∏≠ 1 ‡∏ß‡∏¥‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
                Navigation.NavigateTo("/home", true); // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏õ home
            }
            else if (response.StatusCode == System.Net.HttpStatusCode.Unauthorized)
            {
                // login ‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î (‡πÄ‡∏ä‡πà‡∏ô email/password ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å)
                var error = await response.Content.ReadAsStringAsync();
                loginError = $"‚ùå {(string.IsNullOrWhiteSpace(error) ? "Invalid email or password." : error)}";
            }
            else
            {
                // ‡∏Å‡∏£‡∏ì‡∏µ error ‡∏≠‡∏∑‡πà‡∏ô ‡πÄ‡∏ä‡πà‡∏ô 500, 404
                var error = await response.Content.ReadAsStringAsync();
                loginError = $"‚ùå Error: {(string.IsNullOrWhiteSpace(error) ? "Login failed." : error)}";
            }
        }
        catch (Exception ex)
        {
            // ‡∏Å‡∏£‡∏ì‡∏µ API call ‡∏°‡∏µ exception ‡πÄ‡∏ä‡πà‡∏ô network error
            loginError = $"‚ùå Exception: {ex.Message}";
        }

        isLoading = false; // ‡∏´‡∏¢‡∏∏‡∏î‡πÇ‡∏´‡∏•‡∏î
    }


    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏õ Register
    private void GoToRegister() => Navigation.NavigateTo("/register");
}
